@{
    ViewData["Title"] = "Erişebilir Form";
}

<h4 class="py-3 mb-4">
    <span class="text-muted fw-light">UI Bileşenleri /</span> Erişebilir Form
</h4>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="bx bx-accessibility text-primary me-2"></i>Erişebilir İletişim Formu
                </h5>
            </div>
            <div class="card-body">
                <p class="text-muted mb-4">
                    Bu form, web erişebilirlik standartlarına (WCAG) uygun olarak tasarlanmıştır.
                    ARIA etiketleri, klavye navigasyonu ve ekran okuyucu desteği içerir.
                </p>

                <form id="accessibleForm" aria-labelledby="form-title" novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">
                                Ad Soyad <span class="text-danger" aria-hidden="true">*</span>
                            </label>
                            <input type="text" class="form-control" id="name" name="name"
                                   required aria-required="true" aria-describedby="name-help name-error">
                            <div id="name-help" class="form-text">
                                Lütfen adınızı ve soyadınızı giriniz.
                            </div>
                            <div id="name-error" class="invalid-feedback" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label">
                                E-posta <span class="text-danger" aria-hidden="true">*</span>
                            </label>
                            <input type="email" class="form-control" id="email" name="email"
                                   required aria-required="true" aria-describedby="email-help email-error">
                            <div id="email-help" class="form-text">
                                Geçerli bir e-posta adresi giriniz.
                            </div>
                            <div id="email-error" class="invalid-feedback" role="alert" aria-live="polite"></div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">Telefon</label>
                        <input type="tel" class="form-control" id="phone" name="phone"
                               pattern="[0-9]{10,11}" aria-describedby="phone-help">
                        <div id="phone-help" class="form-text">
                            Örnek: 05551234567
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="subject" class="form-label">Konu</label>
                        <select class="form-select" id="subject" name="subject">
                            <option value="">Konu seçiniz</option>
                            <option value="general">Genel Bilgi</option>
                            <option value="support">Destek</option>
                            <option value="feedback">Geri Bildirim</option>
                            <option value="complaint">Şikayet</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="message" class="form-label">
                            Mesaj <span class="text-danger" aria-hidden="true">*</span>
                        </label>
                        <textarea class="form-control" id="message" name="message" rows="4"
                                  required aria-required="true" aria-describedby="message-help message-error"></textarea>
                        <div id="message-help" class="form-text">
                            Mesajınızı en az birkaç kelimeyle açıklayın.
                        </div>
                        <div id="message-error" class="invalid-feedback" role="alert" aria-live="polite"></div>
                    </div>

                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="newsletter" name="newsletter">
                            <label class="form-check-label" for="newsletter">
                                E-posta bültenine abone olmak istiyorum
                            </label>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="privacy" name="privacy"
                                   required aria-required="true">
                            <label class="form-check-label" for="privacy">
                                <a href="#" target="_blank">Gizlilik politikasını</a> okudum ve kabul ediyorum
                                <span class="text-danger" aria-hidden="true">*</span>
                            </label>
                            <div id="privacy-error" class="invalid-feedback" role="alert" aria-live="polite"></div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="bx bx-send me-1"></i> Gönder
                    </button>
                </form>

                <!-- Başarı Mesajı -->
                <div id="successMessage" class="alert alert-success mt-4 d-none" role="alert" aria-live="polite">
                    <i class="bx bx-check-circle me-1"></i>
                    Mesajınız başarıyla gönderildi. En kısa sürede dönüş yapılacaktır.
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <!-- Erişebilirlik Kontrol Listesi -->
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">Erişebilirlik Özellikleri</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0">
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        ARIA etiketleri
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Klavye navigasyonu
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Focus göstergeleri
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Hata mesajları (aria-live)
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Yardım metinleri (aria-describedby)
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Zorunlu alan işaretleri (aria-required)
                    </li>
                    <li class="mb-2">
                        <i class="bx bx-check text-success me-1"></i>
                        Semantik HTML etiketleri
                    </li>
                    <li>
                        <i class="bx bx-check text-success me-1"></i>
                        Renk kontrastı
                    </li>
                </ul>
            </div>
        </div>

        <!-- Klavye Kısayolları -->
        <div class="card mt-4">
            <div class="card-header">
                <h6 class="mb-0">Klavye Navigasyonu</h6>
            </div>
            <div class="card-body">
                <table class="table table-sm mb-0">
                    <tbody>
                        <tr>
                            <td><kbd>Tab</kbd></td>
                            <td>Sonraki alana git</td>
                        </tr>
                        <tr>
                            <td><kbd>Shift</kbd> + <kbd>Tab</kbd></td>
                            <td>Önceki alana git</td>
                        </tr>
                        <tr>
                            <td><kbd>Enter</kbd></td>
                            <td>Formu gönder</td>
                        </tr>
                        <tr>
                            <td><kbd>Space</kbd></td>
                            <td>Checkbox toggle</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section PageScripts {
<script>
    const form = document.getElementById('accessibleForm');
    const successMessage = document.getElementById('successMessage');

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Önceki hataları temizle
        document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
        document.querySelectorAll('.invalid-feedback').forEach(el => el.textContent = '');

        let isValid = true;

        // Ad Soyad kontrolü
        const name = document.getElementById('name');
        if (!name.value.trim()) {
            showError(name, 'name-error', 'Ad Soyad alanı zorunludur.');
            isValid = false;
        }

        // E-posta kontrolü
        const email = document.getElementById('email');
        const emailRegex = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/;
        if (!email.value.trim()) {
            showError(email, 'email-error', 'E-posta alanı zorunludur.');
            isValid = false;
        } else if (!emailRegex.test(email.value)) {
            showError(email, 'email-error', 'Geçerli bir e-posta adresi giriniz.');
            isValid = false;
        }

        // Mesaj kontrolü
        const message = document.getElementById('message');
        if (!message.value.trim()) {
            showError(message, 'message-error', 'Mesaj alanı zorunludur.');
            isValid = false;
        }

        // Gizlilik politikası kontrolü
        const privacy = document.getElementById('privacy');
        if (!privacy.checked) {
            showError(privacy, 'privacy-error', 'Gizlilik politikasını kabul etmelisiniz.');
            isValid = false;
        }

        if (isValid) {
            // Formu gönder (demo)
            successMessage.classList.remove('d-none');
            form.reset();

            // Başarı mesajına focus
            successMessage.focus();

            // 5 saniye sonra gizle
            setTimeout(() => {
                successMessage.classList.add('d-none');
            }, 5000);
        }
    });

    function showError(element, errorId, message) {
        element.classList.add('is-invalid');
        document.getElementById(errorId).textContent = message;

        // İlk hatalı alana focus
        if (document.querySelectorAll('.is-invalid').length === 1) {
            element.focus();
        }
    }
</script>
}
